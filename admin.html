<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Damodar Admin Panel</title>
<style>
body{
  margin:0;
  background:#0b0b0b;
  font-family:'Trebuchet MS',Arial,sans-serif;
}
.admin-wrap{
  max-width:700px;
  margin:20px auto;
}
.box{
  background:#fff;
  border:3px solid purple;
  border-radius:12px;
  padding:20px;
  margin-bottom:20px;
}
h2{
  text-align:center;
  color:purple;
  margin-bottom:15px;
}
.row{
  display:grid;
  grid-template-columns:80px 1fr 1fr 140px;
  gap:10px;
  align-items:center;
  margin-bottom:10px;
}
.row label{font-weight:900;}
input{
  padding:8px;
  font-size:15px;
  text-align:center;
  font-weight:900;
}
button{
  padding:8px 10px;
  background:#c1121f;
  color:#fff;
  font-weight:900;
  border:none;
  border-radius:20px;
  cursor:pointer;
}
.full-btn{
  width:100%;
  padding:12px;
  margin-top:15px;
}
textarea{
  width:100%;
  height:160px;
  margin-top:10px;
  font-family:monospace;
}
</style>
</head>
<body>

<!-- ===== ADMIN PASSWORD ===== -->
<script>
(function(){
  const ADMIN_PASSWORD = "damodar@123";
  if(sessionStorage.getItem("damodarAdminAuth")==="yes") return;
  const pass = prompt("Enter Admin Password:");
  if(pass === ADMIN_PASSWORD){
    sessionStorage.setItem("damodarAdminAuth","yes");
  }else{
    document.body.innerHTML="";
    alert("Access Denied");
  }
})();
</script>

<div class="admin-wrap">

  <!-- DAILY -->
  <div class="box">
    <h2>Daily Display</h2>
    <input id="daily" placeholder="248-67-935" style="width:100%;font-size:18px;" />
    <button class="full-btn" onclick="saveDaily()">Save Daily</button>
  </div>

  <!-- WEEK -->
  <div class="box">
    <h2>Weekly Entry</h2>

    <div class="row"><label>MON</label><input id="monA"/><input id="monB"/></div>
    <div class="row"><label>TUE</label><input id="tueA"/><input id="tueB"/></div>
    <div class="row"><label>WED</label><input id="wedA"/><input id="wedB"/></div>
    <div class="row"><label>THU</label><input id="thuA"/><input id="thuB"/></div>
    <div class="row"><label>FRI</label><input id="friA"/><input id="friB"/></div>
    <div class="row"><label>SAT</label><input id="satA"/><input id="satB"/></div>

    <button class="full-btn" onclick="saveWeek()">Save Week</button>
    <button class="full-btn" onclick="lockWeek()">Lock Week</button>
  </div>

  <!-- FINAL JSON -->
  <div class="box">
    <h2>FINAL JSON (Copy & Paste)</h2>
    <button class="full-btn" onclick="generateFinalJSON()">Generate Final JSON</button>
    <textarea id="jsonOut" readonly></textarea>
  </div>

</div>

<script>
const days=['mon','tue','wed','thu','fri','sat'];

function saveDaily(){
  localStorage.setItem('damodarDaily', daily.value.trim());
  alert('Daily saved');
}

function saveWeek(){
  const week = days.map(d => {
    const a=document.getElementById(d+'A').value;
    const b=document.getElementById(d+'B').value;
    return (a && b) ? a+'-'+b : '';
  });
  localStorage.setItem('damodarCurrentWeek', JSON.stringify(week));
  alert('Week saved');
}

function lockWeek(){
  const current = JSON.parse(localStorage.getItem('damodarCurrentWeek')||'[]');
  const history = JSON.parse(localStorage.getItem('damodarHistory')||'[]');
  history.push(current);
  localStorage.setItem('damodarHistory', JSON.stringify(history));
  localStorage.removeItem('damodarCurrentWeek');
  days.forEach(d=>{
    document.getElementById(d+'A').value='';
    document.getElementById(d+'B').value='';
  });
  alert('Week locked');
}

function generateFinalJSON(){
  const finalJSON = {
    daily: localStorage.getItem('damodarDaily') || "",
    current: JSON.parse(localStorage.getItem('damodarCurrentWeek')||'[]'),
    history: JSON.parse(localStorage.getItem('damodarHistory')||'[]')
  };
  document.getElementById('jsonOut').value =
    JSON.stringify(finalJSON,null,2);
}
</script>

</body>
</html>
