<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Damodar Panel Chart</title>

<style>
body{margin:0;background:#0b0b0b;color:#fff;font-family:Arial,sans-serif;}
header{color:red;text-align:center;font-weight:900;font-size:22px;margin-top:10px;}
.sub-header{color:#fff;border-top:2px solid blue;text-align:center;padding:2px 0;font-weight:700;}
.description{text-align:center;max-width:900px;margin:0 auto;padding:2px 10px;}
.blue-line{width:100%;height:5px;background:#0033cc;margin:14px 0;}
.yellow-strip{background:#ffff00;border:3px solid red;padding:12px 0;text-align:center;}
.yellow-strip .title{color:#0033cc;font-weight:900;font-size:28px;font-family:"Times New Roman",Georgia,serif;}
.dailyDisplay{font-size:24px;font-weight:900;color:#000;margin-top:6px;}
.panel-box{max-width:900px;width:62.5vw;margin:14px auto;border:3px solid purple;border-radius:8px;padding:6px;background:#b30000;}
.day-col{display:flex;align-items:center;justify-content:center;gap:6px;}
.left-panel,.right-panel{display:flex;flex-direction:column;}
.lp,.rp{font-size:12px;font-weight:700;color:#000;line-height:1;}
.jodi{font-size:34px;font-weight:900;color:#000;}
.jodi.red{color:#c1121f;}
.nav-btn{background:#0033cc;color:#fff;padding:8px 22px;border-radius:24px;font-weight:900;border:none;cursor:pointer;margin:6px;}
.info{text-align:center;color:#fff;padding:20px;}
</style>
</head>

<body>

<header>DAMODAR CHART</header>
<div class="sub-header">Damodar Panel Chart Result</div>

<div class="blue-line"></div>

<div class="yellow-strip">
  <div class="title">DAMODAR</div>
  <div class="dailyDisplay">---</div>
  <button class="nav-btn" onclick="location.reload()">REFRESH</button>
</div>

<div class="blue-line"></div>

<div style="text-align:center">
  <button class="nav-btn" onclick="goBottom()">GO TO BOTTOM</button>
</div>

<div class="panel-box" id="weeks">
  <div class="info">Loading panel dataâ€¦</div>
</div>

<div style="text-align:center">
  <button class="nav-btn" onclick="goTop()">GO TO TOP</button>
</div>

<div class="blue-line"></div>

<div class="yellow-strip">
  <div class="title">DAMODAR</div>
  <div class="dailyDisplay">---</div>
</div>

<div style="text-align:center">
  <button class="nav-btn" onclick="location.href='/'">HOME</button>
  <button class="nav-btn" onclick="location.href='/index.html'">JODI CHART</button>
</div>

<script>
function goTop(){window.scrollTo({top:0,behavior:'smooth'});}
function goBottom(){window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});}

const specialJodi=["00","11","22","33","44","55","66","77","88","99","05","50","16","61","27","72","38","83","49","94"];

function renderDay(day){
  if(!day || !day.jodi) return '';
  const L=day.L||'', R=day.R||'';
  const cls=specialJodi.includes(day.jodi)?'jodi red':'jodi';

  return `
  <div class="day-col">
    <div class="left-panel">
      <div class="lp">${L[0]||''}</div>
      <div class="lp">${L[1]||''}</div>
      <div class="lp">${L[2]||''}</div>
    </div>
    <div class="${cls}">${day.jodi}</div>
    <div class="right-panel">
      <div class="rp">${R[0]||''}</div>
      <div class="rp">${R[1]||''}</div>
      <div class="rp">${R[2]||''}</div>
    </div>
  </div>`;
}

function renderWeeks(data){
  const box=document.getElementById('weeks');
  box.innerHTML='';
  if(!data.weeks || !data.weeks.length){
    box.innerHTML='<div class="info">No data</div>';return;
  }

  data.weeks.forEach((w,i)=>{
    if(i>0) box.innerHTML+='<div style="height:1px;background:#0033cc"></div>';
    box.innerHTML+=`
    <div style="display:grid;grid-template-columns:86px repeat(6,1fr);background:#ffcccc;text-align:center;color:#000">
      <div>
        <div>${w.from}</div>
        <div style="font-size:11px">to</div>
        <div>${w.to}</div>
      </div>
      <div>${renderDay(w.days.mon)}</div>
      <div>${renderDay(w.days.tue)}</div>
      <div>${renderDay(w.days.wed)}</div>
      <div>${renderDay(w.days.thu)}</div>
      <div>${renderDay(w.days.fri)}</div>
      <div>${renderDay(w.days.sat)}</div>
    </div>`;
  });
}

// DAILY RESULT (root data.json)
fetch('/data.json')
  .then(r=>r.json())
  .then(d=>document.querySelectorAll('.dailyDisplay').forEach(e=>e.textContent=d.daily||'---'))
  .catch(()=>{});

// PANEL DATA
fetch('./data.json?_='+Date.now())
  .then(r=>r.json())
  .then(renderWeeks)
  .catch(()=>document.getElementById('weeks').innerHTML='<div class="info">panel/data.json missing</div>');
</script>

</body>
</html>
